!function(){"use strict";angular.module("musApp",["ngRoute","btford.socket-io"])}(),function(){"use strict";angular.module("musApp").controller("mainCtrl",["$scope","$log","$location","musSocketService",function(o,e,r,n){o.musModel={},o.playerName="",n.emit("mus-info"),o.updateModel=function(r){o.musModel=r,e.log(o.musModel)},o.$on("socket:mus-info-success",function(r,n){e.log("Main Event: ",r.name),o.$apply(function(){o.updateModel(JSON.parse(n))})}),o.createRoom=function(){e.log("Main Player Name: ",o.playerName),n.emit("create-room",o.playerName)},o.$on("socket:room-creation-success",function(o,n){e.log("Main Event: ",o.name),r.url("/room/"+n)}),o.$on("socket:room-join-success",function(o,n){e.log("Main Event: ",o.name),r.url("/room/"+n)}),o.$on("socket:room-join-failure",function(o,r){e.log("Main Event: ",o.name),e.log(r)}),o.$on("socket:update-mus",function(r,n){e.log("Main Event: ",r.name),o.$apply(function(){o.updateModel(JSON.parse(n))})}),o.joinRoom=function(r){e.log("Trying to join room: "+r),n.emit("join-room",o.playerName,r)}}])}(),function(){"use strict";angular.module("musApp").controller("roomCtrl",["$scope","$log","$location","$routeParams","musSocketService",function(o,e,r,n,t){o.playerName="",o.room={},t.emit("room-info",n.roomId),o.updateRoom=function(r){o.room=r,e.log(o.room)},o.$on("socket:update-room",function(r,n){e.log("Room Event: ",r.name),o.$apply(function(){o.updateRoom(JSON.parse(n))})}),o.$on("socket:room-info-success",function(r,n){e.log("Room Event: ",r.name),e.log(JSON.parse(n)),o.$apply(function(){o.updateRoom(JSON.parse(n).room),e.log("playerName: "+JSON.parse(n).playerName),o.playerName=JSON.parse(n).playerName,e.log("playerName2: "+o.playerName)})}),o.$on("socket:room-info-failure",function(o,n){e.log("Room Event: ",o.name),e.log(n),r.url("/")}),o.leaveRoom=function(){e.log("leaving...: "+JSON.stringify({playerName:o.playerName,roomId:o.room.id})),t.emit("leave-room",o.room.id)},o.$on("socket:leave-room-success",function(o){e.log("Room Event: ",o.name),r.url("/")}),o.$on("socket:player-left",function(o,r){e.log("Room Event: ",o.name),e.log(r)})}])}(),function(){"use strict";angular.module("musApp").filter("getKeys",function(){return function(o,e){for(var r in e)o.push(r);return o}})}(),function(){"use strict";angular.module("musApp").config(["$routeProvider",function(o){o.when("/",{templateUrl:"src/views/main.html",controller:"mainCtrl"}).when("/room/:roomId",{templateUrl:"src/views/room.html",controller:"roomCtrl"}).otherwise({redirectTo:"/"})}])}(),function(){"use strict";angular.module("musApp").factory("musSocketService",function(o){var e=o();return e.forward("mus-info-success"),e.forward("room-creation-success"),e.forward("room-info-success"),e.forward("room-info-failure"),e.forward("room-join-success"),e.forward("room-join-failure"),e.forward("new-player-joined"),e.forward("leave-room-success"),e.forward("player-left"),e.forward("update-mus"),e.forward("update-room"),e})}();