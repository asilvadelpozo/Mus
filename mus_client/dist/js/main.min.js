!function(){"use strict";angular.module("musApp",["ngRoute","btford.socket-io"])}(),function(){"use strict";angular.module("musApp").controller("mainCtrl",["$scope","$log","$location","musSocketService",function(o,e,n,r){o.musModel={},o.playerName="",o.updateModel=function(n){o.musModel=n,e.log(o.musModel)},o.$on("socket:connection-success",function(n,r){e.log("Main Event: ",n.name),o.$apply(function(){o.updateModel(JSON.parse(r))})}),o.createRoom=function(){e.log("Main Player Name: ",o.playerName),r.emit("create-room",o.playerName)},o.$on("socket:room-creation-success",function(o,r){e.log("Main Event: ",o.name),n.url("/room/"+r)}),o.$on("socket:room-join-success",function(o,r){e.log("Main Event: ",o.name),n.url("/room/"+r)}),o.$on("socket:room-join-failure",function(o,n){e.log("Main Event: ",o.name),e.log(n)}),o.$on("socket:update-mus",function(n,r){e.log("Main Event: ",n.name),o.$apply(function(){o.updateModel(JSON.parse(r))})}),o.joinRoom=function(n){e.log("Trying to join room: "+n),r.emit("join-room",o.playerName,n)}}])}(),function(){"use strict";angular.module("musApp").controller("roomCtrl",["$scope","$log","$location","$routeParams","musSocketService",function(o,e,n,r,t){o.playerName="",o.room={},t.emit("room-info",r.roomId),o.updateRoom=function(n){o.room=n,e.log(o.room)},o.$on("socket:update-room",function(n,r){e.log("Room Event: ",n.name),o.$apply(function(){o.updateRoom(JSON.parse(r))})}),o.$on("socket:room-info-init",function(n,r){e.log("Room Event: ",n.name),e.log(JSON.parse(r)),o.$apply(function(){o.updateRoom(JSON.parse(r).room),e.log("playerName: "+JSON.parse(r).playerName),o.playerName=JSON.parse(r).playerName,e.log("playerName2: "+o.playerName)})}),o.leaveRoom=function(){e.log("leaving...: "+JSON.stringify({playerName:o.playerName,roomId:o.room.id})),t.emit("leave-room",o.room.id)},o.$on("socket:leave-room-success",function(o){e.log("Room Event: ",o.name),n.url("/")}),o.$on("socket:player-left",function(o,n){e.log("Room Event: ",o.name),e.log(n)})}])}(),function(){"use strict";angular.module("musApp").filter("getKeys",function(){return function(o,e){for(var n in e)o.push(n);return o}})}(),function(){"use strict";angular.module("musApp").config(["$routeProvider",function(o){o.when("/",{templateUrl:"src/views/main.html",controller:"mainCtrl"}).when("/room/:roomId",{templateUrl:"src/views/room.html",controller:"roomCtrl"}).otherwise({redirectTo:"/"})}])}(),function(){"use strict";angular.module("musApp").factory("musSocketService",function(o){var e=o();return e.forward("connection-success"),e.forward("room-creation-success"),e.forward("room-info-init"),e.forward("room-join-success"),e.forward("room-join-failure"),e.forward("new-player-joined"),e.forward("leave-room-success"),e.forward("player-left"),e.forward("update-mus"),e.forward("update-room"),e})}();